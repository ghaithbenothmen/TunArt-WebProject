{% extends 'base.html.twig' %}

{% block title %}Nos Formations
{% endblock %}

{% block body %}
	<!-- Navbar Start -->
	<nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top px-4 px-lg-5 py-lg-0">
				<a href="{{path('main')}}" class="navbar-brand d-flex align-items-center">
					<img style="width:100px;height:100px" src="{{asset('img/logo.png' )}}"></img>
			</a>
			<button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">

				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarCollapse">
				<div class="navbar-nav ms-auto py-3 py-lg-0">
					<a href="{{path('main')}}" class="nav-item nav-link ">Accueil</a>
					<a href="{{path('about')}}" class="nav-item nav-link">A propos</a>
					<a href="{{path('services')}}" class="nav-item nav-link active">Nos formations</a>
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
						<div class="dropdown-menu bg-light m-0">
							<a href="{{path('features')}}" class="dropdown-item">Features</a>
							<a href="{{path('appointment')}}" class="dropdown-item">Appointment</a>
							<a href="{{path('team')}}" class="dropdown-item">Our Team</a>
							<a href="{{path('testimonial')}}" class="dropdown-item">Testimonial</a>
							<a href="{{path('404page')}}" class="dropdown-item">404 Page</a>
					
						</div>
					</div>
					<a href="{{path('contact')}}" class="nav-item nav-link">Contact Us</a>
							  {% if app.user %}
 {% if 'ROLE_ARTISTE' in app.user.roles %}
        <a href="{{ path('artisteDashboard', {'id': app.user.id}) }}" class="nav-item nav-link">Dashboard</a>
    {% elseif 'ROLE_ADMIN' in app.user.roles %}
        <a href="{{ path('adminDashboard') }}" class="nav-item nav-link">Dashboard</a>
    {% endif %}
              {#   <a href="{{path('artisteDashboard', {'id': app.user.id})}}" class="nav-item nav-link">Dashboard</a> #}
                <a href="{{ path('app_logout') }}" class="nav-item nav-link">Logout</a>
            {% else %}
                <a href="{{ path('app_registerr') }}" class="nav-item nav-link">Register</a>
                <a href="{{ path('app_login') }}" class="nav-item nav-link">Login</a>
            {% endif %}
				</div>
			</div>
		</body>
	</html>
</nav>
<!-- Navbar End -->
<!-- Page Header Start -->
<div class="container-fluid page-header py-5 mb-5 wow fadeIn" data-wow-delay="0.1s">
	<div class="container text-center py-5">
		<h1 class="display-4 text-white animated slideInDown mb-4">
			Nos formations
		</h1>

	</div>
</div>
<!-- Page Header End -->
<!-- Service Start -->
<div class="container-xxl py-5">
	<div class="container">
		<div class="row g-5 align-items-end mb-5">
			<div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s">
				<div class="border-start border-5 border-primary ps-4">
					<h6 class="text-body text-uppercase mb-2">Nos formations</h6>
					<h1 class="display-6 mb-0">
						Les formations disponibles
					</h1>
				</div>
			</div>
		
			{# <div class="col-lg-6 text-lg-end wow fadeInUp" data-wow-delay="0.3s">
						            <a class="btn btn-primary py-3 px-5" href="">More Services</a>
						          </div> #}
		</div>
	<form action="{{ path('services') }}" method="get" class="mb-3">
    <div class="row align-items-center">
        <div class="col-auto">
            <label for="sort" class="form-label">Trier par :</label>
        </div>
        <div class="col-auto">
            <select name="sort" id="sort" class="form-select">
                <option value="name_asc" {% if sortBy == 'name_asc' %} selected {% endif %}>Nom (A-Z)</option>
                <option value="name_desc" {% if sortBy == 'name_desc' %} selected {% endif %}>Nom (Z-A)</option>
                <option value="rate" {% if sortBy == 'rate' %} selected {% endif %}>Note</option>
            </select>
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary">Trier</button>
        </div>
    </div>
</form>

		<div class="row g-4 justify-content-center">
			{% for form in formations %}
				<div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
					<div class="service-item bg-light overflow-hidden h-100">
						{% if form.image %}
							<img src="{{ asset('uploads/' ~ form.image) }}" width="100%" height="400" alt=""/>
						{% else %}
							<span>Aucune image disponible</span>
						{% endif %}
						<div class="service-text position-relative text-center h-100 p-4">
							<h5 class="mb-3">{{ form.nom}}</h5>
							<span>
								De
								{{ form.datedebut ? form.datedebut|date('j F Y') : ''}}
								Ã 
								{{ form.datefin ? form.datefin|date('j F Y') : ''}}</span>
							<p>
								{{ form.description|capitalize }}
							</p>
				<p>
												{% set averageRating = form.getRatingsAverage() %}
												{% for i in 1..5 %}
													{% if averageRating >= i %}
														<i class="fas fa-star text-warning"></i>
													{% elseif averageRating > i - 1 %}
														<i class="fas fa-star-half-alt text-warning"></i>
													{% else %}
														<i class="far fa-star text-warning"></i>
													{% endif %}
												{% endfor %}
											</p>
							<a class="small" href="{{ path('app_formation_details', {'id': form.id}) }}">PLUS<i class="fa fa-arrow-right ms-3"></i>
							</a>

						</a>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>
</div></div><!-- Service End -->{% endblock %}
